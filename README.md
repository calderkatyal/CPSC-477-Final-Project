# CSPC 477 Final Project Proposal

**Authors:** Calder Katyal, Jess Yatvitskiy  
**Affiliation:** Yale University  
**Emails:** calder.katyal@yale.edu, jess.yatvitskiy@yale.edu

---

## Project Overview

The goal of this project is to develop a scalable backend for natural language email search. The proposed system leverages state-of-the-art technologies to build a hybrid search and ranking platform that integrates keyword-based and semantic retrieval methods. We will use the Enron dataset, which contains approximately 500,000 emails generated by employees of the Enron Corporation.

---

## Description of Related Works

Traditional keyword-based search methods, such as BM25 [1], retrieve documents based on term frequency but lack semantic understanding. Dense retrieval models like Sentence-BERT [2] improve search by leveraging embeddings for semantic similarity. Text-to-SQL models, including Seq2SQL [3] and SQLNet [4], translate natural language queries into structured database queries for more precise retrieval. Hybrid approaches, such as Reciprocal Rank Fusion (RRF) [5], combine lexical and semantic search to enhance results. Our approach integrates many of these methods to build an efficient and scalable natural language email search system.

---

## Proposed Approaches

**Data Ingestion & Storage:**  
Emails are subjected to text cleaning (using tools such as SpaCy and NLTK) to remove signatures, stopwords, and extraneous content, while key metadata is extracted. The cleaned metadata is stored in PostgreSQL with appropriate indexing and partitioning, and high-quality embeddings are precomputed using an open-source dense retrieval model (e.g., BGE or E5-Large). These embeddings are stored via FAISS for efficient retrieval.

**Query Expansion:**  
Upon receiving a query, a paraphrasing model (such as Flan-T5-Large) generates several variants. Each variant is processed in parallel to capture diverse linguistic expressions.

**Hybrid Search:**  
Query variants are processed using two search methods. A BM25-based keyword search is performed on Elasticsearch over the indexed metadata, and a FAISS-based semantic search is conducted by converting each variant into an embedding (using the email embedding model) and retrieving emails based on cosine similarity. Candidate results from both methods are merged using Reciprocal Rank Fusion, with duplicates removed and scores normalized using Min-Max scaling.

**Weighted Scoring:**  
The merged candidates are scored between [0, 1] using a weighted combination of BM25 and FAISS similarity scores, with additional boosts for matches in critical metadata fields.

---

## Evaluation Metrics

**Weighted Kendallâ€™s W for Similar Queries:**  
We generate $K$ similar queries and then use a weighted Kendall's W metric to measure similarity between the corresponding email rankings.

**Weighted MSE:**  
We generate $K$ similar queries and then calculate weighted MSE to measure similarity between the corresponding email relevance scores.

**Human Evaluation:**  
We generate queries and evaluate rankings as a sanity check.
